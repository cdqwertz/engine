<html>
	<head>
		<title>Game Editor</title>
		<style>
			body {
				background-color: #f7f7f7;
			}

			#objects {
				background-color: #f3f3f3;
				border: 1px solid #d3d3d3;
				list-style-type: none;

				position: fixed;
				top: 70px;
				left: 0;
				width: 200px;
				height: 70%;
				margin: 0;
				padding: 0;
				overflow: hidden;
			}

			#objects li {
				 float: top;
			}

			#objects li a {
				display: block;
				text-align: center;
				padding: 14px 16px;
				text-decoration: none;
				color: black;
			}

			#objects li a:hover {
				display: block;
				text-align: center;
				padding: 14px 16px;
				text-decoration: none;
				color: black;
				background-color: #777777;

				box-shadow: 0px 0px 5px grey; 
			}




			#nav {
				background-color: #f3f3f3;
				border: 1px solid #d3d3d3;
				list-style-type: none;

				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				margin: 0;
				padding: 0;
				overflow: hidden;
			}

			#nav #l {
				 float: left;
			}

			#nav #r {
				 float: right;
			}

			#nav li a {
				display: block;
				text-align: center;
				padding: 14px 16px;
				text-decoration: none;
				color: black;
			}
			
			#nav li a:hover {
				display: block;
				text-align: center;
				padding: 14px 16px;
				text-decoration: none;

				color: black;
				background-color: #777777;
				box-shadow: 0px 0px 5px grey; 
			}
		</style>
	</head>
	<body onload="load();">
		<script>
			var scenes = [["mainScene"]];
			var scene = 0;

			var selectedObject;

			var objectsGUI;

			function load() {
				objectsGUI = document.getElementById("objects");
			}

			//gui

			function showObjectsGUI() {
				var s = "";
				for(var i = 1; i < scenes[scene].length; i++) {
					s += "<li><a onclick=\"GUISelectObject(" + i + ");return false;\">" + scenes[scene][i][0] + "</a></li>";
				}
				objectsGUI.innerHTML = s;
			}

			function showComponentsGUI() {
				var s = "";
				if(selectedObject == -1) {
					return 0;
				}
				s += "<li><a onclick=\"showObjectsGUI();return false;\">Back</a></li>";
				for(var i = 1; i < scenes[scene][selectedObject].length; i++) {
					s += "<li><a onclick=\"GUISelectComponent(" + i + ");return false;\">" + scenes[scene][selectedObject][i] + "</a></li>";
				}
				objectsGUI.innerHTML = s;
			}

			function GUISelectObject(i) {
				selectedObject = i;
				showComponentsGUI();
			}
			function GUISelectComponent(i) {
				
			}

			//generate Code

			function showCode() {
				alert(genCode());
			}

			function genCode() {
				var code = "function load() {\n";
				for(var i = 0; i < scenes.length; i++){
					for(var j = 1; j < scenes[i].length; j++){
						code += "\tvar " + scenes[i][j][0] + " = new actor();\n" ;
						for(var k = 1; k < scenes[i][j].length; k++){
							code += "\t" + scenes[i][j][0] + ".addComponent(new " + scenes[i][j][k] + "());\n" ;
						}
						code += "\tmainScene.addObject(" + scenes[i][j][0] + ");\n\n" ;
					}
				}
				code += "}";
				return code;
			}

			//add actors, scenes...

			function addActor() {
				var n = prompt("Name:");
				if(n) {
					var p = scenes[scene].push([]);
					scenes[scene][p-1].push(n);
				}
				showObjectsGUI();
			}
			
			function addComponent() {
				var n = prompt("Type:");
				if(n) {
					var p = scenes[scene][selectedObject].push([]);
					scenes[scene][selectedObject][p-1].push(n);
				}
				showComponentsGUI();
			}
		</script>

		<ul id="nav">

			<li id="l"><a onclick="newGame();return false;">New</a></li>
			<li id="l"><a onclick="openGame();return false;">Open</a></li>
			<li id="l"><a onclick="saveGame();return false;">Save</a></li>
			<li id="l"><a onclick="showCode();return false;">Export</a></li>

			<li id="r"><a onclick="addActor();return false;">Add Actor</a></li>
			<li id="r"><a onclick="addComponent();return false;">Add Component</a></li>
		</ul>

		<ul id="objects">
		</ul>

		<canvas id=preview>
		</canvas>
	</body>
</html>
