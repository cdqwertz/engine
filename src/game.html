<html>
	<head>
		<title>Game</title>
	</head>
	<body onload="onInit()">
		<canvas id="screen"></canvas>

		<script src="vector.js"></script>
		<script src="input.js"></script>
		<script src="actor.js"></script>
		<script src="scene.js"></script>
		<script src="components.js"></script>
		<script src="physics.js"></script>
		<script src="core.js"></script>

		<script>
			function move(obj) {
				this.componentType = "move";
				this.g = obj;
				this.update = function(obj) {
					if (input.getKey(38) == true) {
						obj.components[1].getPos().add(new vec2(0, -2));
					}
					if (input.getKey(37) == true) {
						obj.components[1].getPos().add(new vec2(-2, 0));
					}
					if (input.getKey(39) == true) {
						obj.components[1].getPos().add(new vec2(2, 0));
					}
					if (input.getKey(40) == true) {
						obj.components[1].getPos().add(new vec2(0, 2));
					}

					if(obj.components[obj.findComponent("boxCollider")].isColliding) {
						console.log("intersect");
						obj.components[1].setPos(new vec2(0, 0));
						obj.components[obj.findComponent("boxCollider")].isColliding = false;
					}
				};
			}

			function load()
			{
				var ground = new actor();
				ground.addComponent(new transform(new vec2(400, 300), new vec2(0, 0)));
				var groundColl = new boxCollider(0, 0, 300, 300, "enemy", false)
				ground.addComponent(groundColl);
				ground.addComponent(new drawRect(new vec2(0, 0), new vec2(300, 300)));

				mainScene.addObject(ground);

				var test = new actor();
				test.addComponent(new move(ground));
				test.addComponent(new transform(new vec2(100, 100), new vec2(0, 0)));
				var testColl = new boxCollider(0, 0, 100, 100, "player", true);
				test.addComponent(testColl);
				test.addComponent(new drawRect(new vec2(0, 0), new vec2(100, 100)));

				var collLayer = new collisionLayer();
				collLayer.addCollider(groundColl);
				collLayer.addCollider(testColl);
				physicsLayers.addLayer(collLayer);

				mainScene.addObject(test);
			}
		</script>
	</body>
</html>
